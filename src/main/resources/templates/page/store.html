<!DOCTYPE html>
<html lang="ko" xmlns="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
    <title>Fragrantia Admin Store</title>

    <!-- meta Setting -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:description" content="향의 이야기 당신을 초대합니다.">
    <meta property="og:image" content="https://green-six.github.io/Fragrantia-User-Web/images/ogLogo.png">

    <!-- 외부 스타일시트(전역 <- 리셋포함) -->
    <link rel="icon" type="image/png" sizes="96x96" href="../../images/favicon-96x96.png">
    <link rel="stylesheet" href="../../css/global.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../css/module/buttonNav.css">
    <link rel="stylesheet" href="../../css/module/header.css">
    <link rel="stylesheet" href="../../css/page/store.css">

    <!-- 외부 스크립트 (자바스크립트, jQuery) -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.slim.min.js"></script> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script> -->
    <script src="https://kit.fontawesome.com/047a434073.js" crossorigin="anonymous"></script>
    <script src="../../js/jquery.min.js"></script>
    <script src="../../js/buttonNav.js"></script>
    <script src="../../js/store.js"></script>
</head>

<body>
    <th:block th:replace="fragments/header :: headerFragment"></th:block>

    <div class="wrap">
        <span class="h1">매장 관리</span>
    </div>

    <div class="wrap but_nav_box">
        <div class="button-nav">
            <a href="#"><i class="plus-button fa-regular fa-square-plus fa-xl" style="color: #000000;"></i></a>
            <a href="#"><i class="minus-button fa-regular fa-square-minus fa-xl" style="color: #000000;"></i></a>
        </div>
    </div>

    <div id="store" class="wrap">

        <div id="modal" class="create-modal" style="display: none">
            <div class="create-modal-content">
                <h2>New store</h2>
                <form>
                    <label for="create_name">매장 이름</label><br />
                    <input type="text" name="create_name" id="create_name"><br />

                    <label for="create_tel">전화번호</label><br />
                    <input type="tel" name="create_tel" id="create_tel"><br />

                    <label for="create_addr">주소</label><br />
                    <input type="text" name="create_addr" id="create_addr"><br />

                    <label for="create_zip">우편번호</label><br />
                    <input type="number" name="create_zip" id="create_zip"><br />

                    <label for="create_latitude">위도</label><br />
                    <input type="number" name="create_latitude" id="create_latitude"><br />

                    <label for="create_longitude">경도</label><br />
                    <input type="number" name="create_longitude" id="create_longitude"><br />

                    <label for="create_detail">상세 설명</label><br />
                    <textarea name="create_detail" id="create_detail"></textarea><br />

                    <label for="create_file">이미지</label>
                    <input type="file" id="create_file" class="col-md-12 form-control form-control-sm">

                    <button id="modal-submit" type="submit">작성</button>
                    <button id="modal-close">취소</button>
                </form>
            </div>
        </div>

        <!-- 테이블 영역 -->
        <table>
            <!-- 헤더 -->
            <thead>
                <tr>
                    <th class="check"><input type="checkbox" name="chkAll" id="chkAll" /></th>
                    <th class="no">NO</th>
                    <th class="title">매장이름</th>
                    <th class="tel">전화번호</th>
                    <th class="addr">주소</th>
                </tr>
            </thead>

            <!-- 본문 -->
            <tbody th:each="store : ${stores}">
                <!-- 요약 -->
                <tr class="store-header">
                    <td class="check"><input type="checkbox" name="chk" id="chk" /></td>
                    <td class="no" th:text="${store.id}"></td>
                    <td class="title" th:text="${store.name}"></td>
                    <td class="tel" th:text="${store.telephone}"></td>
                    <td class="addr" th:text="${store.address}"></td>
                </tr>
                <!-- 상세 -->
                <tr class="store-content">
                    <td colspan="5">
                        <div class="content">

                            <label for="store_name">Store Name</label><br />
                            <input type="text" name="store_name" id="store_name" class="store_text" disabled="true"
                                th:value="${store.name}"><br />

                            <label for="store_tel">Telephone</label><br />
                            <input type="tel" name="store_tel" id="store_tel" class="store_text" disabled="true"
                                th:value="${store.telephone}"><br />

                            <label for="store_addr">Address</label><br />
                            <input type="text" name="store_addr" id="store_addr" class="store_text" disabled="true"
                                th:value="${store.address}"><br />

                            <label for="store_zip">Zip</label><br />
                            <input type="number" name="store_zip" id="store_zip" class="store_text" disabled="true"
                                th:value="${store.zip}"><br />

                            <label for="store_latitude">Latitude</label><br />
                            <input type="number" name="store_latitude" id="store_latitude" class="store_text"
                                disabled="true" th:value="${store.latitude}"><br />

                            <label for="store_longitude">Longitude</label><br />
                            <input type="number" name="store_longitude" id="store_longitude" class="store_text"
                                disabled="true" th:value="${store.longitude}"><br />

                            <label for="store_detail">Detail</label><br />
                            <textarea name="store_detail" id="store_detail" class="store_text" disabled="true"
                                th:text="${store.detail}"></textarea><br />

                            <label for="store_file">File</label><br />
                            <input type="file" name="store_file" id="store_file" class="store_text"
                                disabled="true"><br />

                            <label for="store_prev_file">Prev File</label><br />
                            <input type="text" name="store_prev_file" id="store_prev_file" class="store_text"
                                disabled="true" readonly
                                th:value="${store.imgUrl != null ? store.imgUrl.replace('https://berryawsbucket.s3.ap-northeast-2.amazonaws.com/static/', '') : ''}">

                            <div class="col-md-10">
                                <img th:src="${store.imgUrl}" th:if="${store.imgUrl != null}" class="prev_img">
                            </div>

                        </div>
                        <div class="content_btn">
                            <button type="button" class="btn btn-dark edit-btn">Edit</button>
                        </div>
                    </td>
                </tr>
            </tbody>

        </table>
        <div class="pagination">
            <ul>
                <li><a th:href="@{${'store?page=' + (currentPage - 1)}}" th:if="${currentPage > 0}">Prev</a></li>
                <li th:each="pageNum : ${#numbers.sequence(0, totalPages - 1)}">
                    <a th:href="@{${'store?page=' + pageNum}}" th:text="${pageNum + 1}"
                        th:class="${pageNum == currentPage ? 'active' : ''}"></a>
                </li>
                <li><a th:href="@{${'store?page=' + (currentPage + 1)}}"
                        th:if="${currentPage < totalPages - 1}">Next</a></li>
            </ul>
        </div>
    </div>
</body>

</html>